{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block content %}
{{ section.content | safe }}

{% if config.extra.show_homepage_section and config.extra.homepage_section %}
{% set section_path = config.extra.homepage_section ~ "/_index.md" %}
{% set blog_section = get_section(path=section_path) %}
{% if blog_section %}
<section>
    <h2>{{ config.extra.homepage_section_title | default(value="Recent Posts") }}</h2>
    {% set post_limit = config.extra.homepage_section_limit | default(value=5) %}
    {% for page in blog_section.pages | slice(end=post_limit) %}
    <h3><a href="{{ page.permalink }}">{{ page.title }}</a></h3>
    {{ macros::post_meta(page=page) }}
    {% if page.description %}
    <p>{{ page.description }}</p>
    {% endif %}
    {% endfor %}
    <p><a href="{{ blog_section.permalink }}" role="button">{{ config.extra.homepage_section_button_text | default(value="View all posts â†’") }}</a></p>
</section>
{% endif %}
{% endif %}
{% endblock content %}
